(this["webpackJsonpreact_phone-catalog"]=this["webpackJsonpreact_phone-catalog"]||[]).push([[0],Array(20).concat([function(e,t,a){e.exports=a(44)},,,,,,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(18),s=a.n(c),l=a(6);var o=a(3),i=function(){return n.a.createElement("label",{className:"Logo"},n.a.createElement(o.b,{className:"Logo__link",to:"/"}))},u=(a(30),function(e){var t=e.links;return n.a.createElement("nav",{className:"Nav"},n.a.createElement("ul",{className:"Nav__list"},n.a.createElement("li",{className:"Nav__item"},n.a.createElement(i,null)),t.map((function(e){var t=e.address,a=e.title,r=e.isOuter;return n.a.createElement("li",{className:"Nav__item"},n.a.createElement("label",{className:"Nav__label"},r?n.a.createElement("a",{className:"Nav__link",target:"_blank",href:t},a):n.a.createElement(o.c,{className:"Nav__link",to:t},a)))}))))}),m=(a(31),function(e){var t=e.favorites;return n.a.createElement("label",{className:"FavoritesIcon"},t.length>0?n.a.createElement("span",{className:"FavoritesIcon__count"},t.length):"",n.a.createElement(o.c,{className:"FavoritesIcon__link",to:"/favorites"}))}),d=(a(32),function(e){var t=e.cart;return n.a.createElement("label",{className:"CartIcon"},t.length>0?n.a.createElement("span",{className:"CartIcon__count"},t.length):"",n.a.createElement(o.c,{className:"CartIcon__link",id:"CartIcon__link",to:"/cart"}))}),p=(a(33),a(34),function(e){var t=e.count,a=e.active,r=new Array(t).fill(0);return n.a.createElement("div",null,r.map((function(e,t){return n.a.createElement("span",{className:a===t+1?"dots__dot dots__dot--active":"dots__dot"})})))}),_=(a(35),function(e){var t=e.images;return n.a.createElement("div",null,t.map((function(e){return n.a.createElement("img",{src:e.pictureUrl,alt:e.phoneName})})))}),f=function(){return n.a.createElement("div",{className:"promo-slider"},n.a.createElement("div",{className:"promo-slider__wrapper"},n.a.createElement("button",{className:"promo-slider__button promo-slider__button--left"}),n.a.createElement("div",{className:"promo-slider__frame"},n.a.createElement(_,{images:[]})),n.a.createElement("button",{className:"promo-slider__button promo-slider__button--right"})),n.a.createElement(p,{count:3,active:2})," // Dots under slider.")},E=function(){return n.a.createElement("div",{className:"HomePage"},n.a.createElement(f,null))},g=(a(36),a(1)),v=function(){var e=Object(g.e)(),t=Object(g.f)(),a=new URLSearchParams(t.search);return n.a.createElement("div",{className:"SearchField"},n.a.createElement("input",{type:"text",className:"SearchField__input",placeholder:"Search in phones...",value:a.get("filter")||"",onChange:function(t){a.set("filter",t.target.value),e.push({search:a.toString()})}}),n.a.createElement("button",{type:"submit",className:a.get("filter")?"SearchField__button":"SearchField__button SearchField__button--magnifier",onClick:function(){a.get("filter")&&(a.set("filter",""),e.push({search:a.toString()}))}}))},h=(a(37),a(8)),b=(a(38),a(39),function(e){var t=e.product,a=e.cart,c=e.setCart,s=e.favorites,o=e.setFavorites,i=t.imageUrl,u=t.name,m=t.price,d=t.discount,p=t.screen,_=t.capacity,f=t.ram,E=m-m*d/100,g=Object(r.useState)(s.filter((function(e){return e.id===t.id})).length>0),v=Object(l.a)(g,2),b=v[0],N=v[1],C=Object(r.useState)(a.filter((function(e){return e.id===t.id})).length>0),O=Object(l.a)(C,2),S=O[0],P=O[1],j=Object(r.useState)(a.filter((function(e){return e.id===t.id})).length),w=Object(l.a)(j,2),y=w[0],k=w[1];Object(r.useEffect)((function(){P(a.filter((function(e){return e.id===t.id})).length>0),k(a.filter((function(e){return e.id===t.id})).length)}),[a]);return n.a.createElement("div",{className:"ProductCard"},n.a.createElement("img",{className:"ProductCard__img",src:i,alt:u}),n.a.createElement("p",{className:"ProductCard__title"},u),d>0?n.a.createElement("div",{className:"ProductCard__price-wrapper"},n.a.createElement("span",{className:"ProductCard__price"},"$"+E),n.a.createElement("span",{className:"ProductCard__price ProductCard__price--old"},"$"+m)):n.a.createElement("div",{className:"ProductCard__price-wrapper"},n.a.createElement("span",{className:"ProductCard__price"},"$"+E)),n.a.createElement("div",{className:"ProductCard__description"},n.a.createElement("span",{className:"ProductCard__feature"},n.a.createElement("span",{className:"ProductCard__feature--title ProductCard__feature"},"Screen"),n.a.createElement("span",{className:"ProductCard__feature--value ProductCard__feature"},p)),n.a.createElement("span",{className:"ProductCard__feature"},n.a.createElement("span",{className:"ProductCard__feature--title ProductCard__feature"},"Capacity"),n.a.createElement("span",{className:"ProductCard__feature--value ProductCard__feature"},_)),n.a.createElement("span",{className:"ProductCard__feature"},n.a.createElement("span",{className:"ProductCard__feature--title ProductCard__feature"},"RAM"),n.a.createElement("span",{className:"ProductCard__feature--value ProductCard__feature"},f))),n.a.createElement("div",{className:"ProductCard__buttons-wrapper"},n.a.createElement("button",{className:S?"ProductCard__add-to-cart ProductCard__add-to-cart--added":"ProductCard__add-to-cart",onClick:function(){c([].concat(Object(h.a)(a),[t]))}},S?"".concat(y,"  added to cart"):"Add to cart"),n.a.createElement("button",{className:b?"ProductCard__add-to-fav ProductCard__add-to-fav--added":"ProductCard__add-to-fav",onClick:function(){b?(o(Object(h.a)(s).filter((function(e){return e.id!==t.id}))),N(!1)):(o([].concat(Object(h.a)(s),[t])),N(!0))}})))}),N=(a(40),function(e){var t=e.products,a=e.cart,r=e.favorites,c=e.setFavorites,s=e.setCart;return n.a.createElement("div",{className:"MainFrame"},t.map((function(e){return n.a.createElement(b,{product:e,cart:a,favorites:r,setFavorites:c,setCart:s})})))}),C=function(e){var t=e.pagesCount,a=Object(g.f)(),c=Object(g.e)(),s=new URLSearchParams(a.search);console.log("pagination",s.toString());var l=parseInt(s.get("page")||"1"),o=new Array(Math.ceil(t)).fill(0),i=l===o.length,u=1===l,m=function(e){return">"===e.target.name?(s.set("page",(l+1).toString()),void c.push({search:s.toString()})):"<"===e.target.name?(s.set("page",(l-1).toString()),void c.push({search:s.toString()})):(s.set("page",(+e.target.name+1).toString()),void c.push({search:s.toString()}))};return Object(r.useEffect)((function(){s.set("page",l.toString()),c.push({search:s.toString()})}),[l]),n.a.createElement("div",null,n.a.createElement("button",{type:"button",name:"<",disabled:u,onClick:m},"<"),o.map((function(e,t){return n.a.createElement("button",{name:t.toString(),onClick:m,type:"button"},t+1)})),n.a.createElement("button",{type:"button",name:">",disabled:i,onClick:m},">"))},O=(a(41),function(){var e=Object(g.f)(),t=new URLSearchParams(e.search),a=Object(g.e)();return n.a.createElement("div",{className:"SortBy"},n.a.createElement("span",{className:"SortBy__legend"},"Sort by"),n.a.createElement("br",null),n.a.createElement("select",{className:"SortBy__select",onChange:function(e){t.set("sort_type",e.target.value),a.push({search:t.toString()})},value:t.get("sort_type")||""},[{value:"",text:"Choose"},{value:"age",text:"Newest"},{value:"name",text:"Alphabetically"},{value:"low_price",text:"Low price"},{value:"high_price",text:"High price"}].map((function(e){return n.a.createElement("option",{value:e.value},e.text)}))))}),S=(a(42),function(){var e=Object(g.f)(),t=new URLSearchParams(e.search),a=Object(g.e)();return n.a.createElement("div",{className:"ItemsOnPageSelect"},n.a.createElement("span",null,"Items on page"),n.a.createElement("br",null),n.a.createElement("select",{className:"ItemsOnPageSelect__per-page",onChange:function(e){t.set("per_page",e.target.value),a.push({search:t.toString()})},value:t.get("per_page")||""},["8","16","32","64","All"].map((function(e){return n.a.createElement("option",{value:e},e)}))))}),P=function(e){var t=e.products,a=e.cart,c=e.favorites,s=e.setFavorites,o=e.setCart,i=Object(r.useState)(t),u=Object(l.a)(i,2),m=u[0],d=u[1],p=Object(r.useState)(m),_=Object(l.a)(p,2),f=_[0],E=_[1],v=Object(r.useState)(f),b=Object(l.a)(v,2),P=b[0],j=b[1],w=Object(g.e)(),y=Object(g.f)(),k=new URLSearchParams(y.search);console.log("catalog",k.toString());var F=(k.get("filter")||"").toLowerCase(),I=(k.get("sort_type")||"age").toLowerCase(),A=parseInt(k.get("page")||"1"),L=parseInt(k.get("per_page")||"8");return Object(r.useEffect)((function(){k.set("page",A.toString()),k.set("per_page",L.toString()),k.set("sort_type",I),w.push({search:k.toString()})}),[]),Object(r.useEffect)((function(){""!==I?("name"===I&&E(Object(h.a)(m).sort((function(e,t){return e.name.toLowerCase().localeCompare(t.name.toLowerCase())}))),"age"===I&&E(Object(h.a)(m).sort((function(e,t){return e.age-t.age}))),"low_price"===I&&(E(Object(h.a)(m).sort((function(e,t){return e.price*(100-e.discount)/100-t.price*(100-t.discount)/100}))),console.log(f)),"high_price"===I&&E(Object(h.a)(m).sort((function(e,t){return t.price*(100-t.discount)/100-e.price*(100-e.discount)/100})))):E(m)}),[m,I]),Object(r.useEffect)((function(){d(""!==F?t.filter((function(e){return e.name.toLowerCase().includes(F)})):t)}),[t,F]),Object(r.useEffect)((function(){var e=(A-1)*L,t=e+L;j(f.slice(e,t))}),[f,A,L]),n.a.createElement(n.a.Fragment,null,n.a.createElement("p",{className:"Catalog__models-count"},"".concat(m.length," models")),n.a.createElement("div",{className:"Catalog__select-wrapper"},n.a.createElement(O,null),n.a.createElement(S,null)),n.a.createElement("div",null,n.a.createElement(N,{products:P,cart:a,favorites:c,setFavorites:s,setCart:o})),n.a.createElement(C,{pagesCount:f.length/L}))},j=(a(43),function(e){var t=e.products,a=e.cart,r=e.favorites,c=e.setFavorites,s=e.setCart,l=t.filter((function(e){return"phone"===e.type}));return n.a.createElement("div",{className:"PhonesPage"},n.a.createElement("h1",{className:"PhonesPage__h1"},"Mobile phones"),n.a.createElement(P,{products:l,cart:a,favorites:r,setFavorites:c,setCart:s}))}),w=function(){var e=Object(r.useState)([]),t=Object(l.a)(e,2),a=t[0],c=t[1];Object(r.useEffect)((function(){fetch("/api/products.json").then((function(e){return e.json()})).then((function(e){c(e)}))}),[]);var s=a,o=Object(r.useState)([]),p=Object(l.a)(o,2),_=p[0],f=p[1],h=Object(r.useState)([]),b=Object(l.a)(h,2),N=b[0],C=b[1];return n.a.createElement("div",{className:"App"},n.a.createElement("header",{className:"App__header"},n.a.createElement("div",{className:"App__header-wrapper"},n.a.createElement(u,{links:[{title:"HOME",address:"/",isOuter:!1},{title:"PHONES",address:"/phones",isOuter:!1},{title:"TABLETS",address:"/tablets",isOuter:!1},{title:"ACCESSORIES",address:"/accessories",isOuter:!1}]}),n.a.createElement("div",{className:"App__header-right-wrapper"},n.a.createElement(v,null),n.a.createElement(m,{favorites:N}),n.a.createElement(d,{cart:_})))),n.a.createElement("main",{className:"App__main"},n.a.createElement("switch",null,n.a.createElement(g.a,{path:"/phones"},n.a.createElement(j,{products:s,cart:_,favorites:N,setFavorites:C,setCart:f})),n.a.createElement(g.a,{path:"/"},n.a.createElement(E,null)))),n.a.createElement("footer",{className:"App__footer"},n.a.createElement(i,null),n.a.createElement(u,{links:[{title:"GITHUB",address:"http://www.github.com",isOuter:!0},{title:"CONTACTS",address:"/contacts",isOuter:!1},{title:"RIGHTS",address:"/rights",isOuter:!1}]})))};s.a.render(n.a.createElement(o.a,null,n.a.createElement(w,null)),document.getElementById("root"))}]),[[20,1,2]]]);
//# sourceMappingURL=main.41248a4a.chunk.js.map