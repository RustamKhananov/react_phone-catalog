(this["webpackJsonpreact_phone-catalog"]=this["webpackJsonpreact_phone-catalog"]||[]).push([[0],Array(20).concat([function(e,t,a){e.exports=a(50)},,,,,,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(18),s=a.n(c),o=a(4),l=a(1);var i=a(2),u=function(){return n.a.createElement("label",{className:"Logo"},n.a.createElement(i.b,{className:"Logo__link",to:"/"}))},m=(a(30),function(e){var t=e.links;return n.a.createElement("nav",{className:"Nav"},n.a.createElement("ul",{className:"Nav__list"},n.a.createElement("li",{className:"Nav__item"},n.a.createElement(u,null)),t.map((function(e){var t=e.address,a=e.title,r=e.isOuter;return n.a.createElement("li",{key:t+a+r,className:"Nav__item"},n.a.createElement("label",{className:"Nav__label"},r?n.a.createElement("a",{className:"Nav__link",target:"_blank",href:t},a):n.a.createElement(i.c,{className:"Nav__link",exact:!0,to:t},a)))}))))}),d=(a(31),function(e){var t=e.favorites;return n.a.createElement("label",{className:"FavoritesIcon"},t.length>0?n.a.createElement("span",{className:"FavoritesIcon__count"},t.length):"",t.length>0?n.a.createElement(i.c,{className:"FavoritesIcon__link",to:"/favorites"}):n.a.createElement("span",{className:"FavoritesIcon__link"}))}),p=(a(32),function(e){var t=e.cart;return n.a.createElement("label",{className:"CartIcon"},t.length>0?n.a.createElement("span",{className:"CartIcon__count"},t.length):"",t.length>0?n.a.createElement(i.c,{className:"CartIcon__link",id:"CartIcon__link",to:"/cart"}):n.a.createElement("span",{className:"CartIcon__link"}))}),f=(a(33),a(34),function(e){var t=e.count,a=e.active,r=new Array(t).fill(0);return n.a.createElement("div",null,r.map((function(e,t){return n.a.createElement("span",{className:a===t+1?"dots__dot dots__dot--active":"dots__dot"})})))}),_=(a(35),function(e){var t=e.images;return n.a.createElement("div",null,t.map((function(e){return n.a.createElement("img",{src:e.pictureUrl,alt:e.phoneName})})))}),E=function(){return n.a.createElement("div",{className:"promo-slider"},n.a.createElement("div",{className:"promo-slider__wrapper"},n.a.createElement("button",{className:"promo-slider__button promo-slider__button--left"}),n.a.createElement("div",{className:"promo-slider__frame"},n.a.createElement(_,{images:[]})),n.a.createElement("button",{className:"promo-slider__button promo-slider__button--right"})),n.a.createElement(f,{count:3,active:2})," // Dots under slider.")},g=function(){return n.a.createElement("div",{className:"HomePage"},n.a.createElement(E,null))},h=(a(36),function(){var e=Object(l.f)(),t=Object(l.g)(),a=new URLSearchParams(t.search);return n.a.createElement("div",{className:"SearchField"},n.a.createElement("input",{type:"text",className:"SearchField__input",placeholder:"Search in phones...",value:a.get("filter")||"",onChange:function(t){a.set("filter",t.target.value),e.push({search:a.toString()})}}),n.a.createElement("button",{type:"submit",className:a.get("filter")?"SearchField__button":"SearchField__button SearchField__button--magnifier",onClick:function(){a.get("filter")&&(a.set("filter",""),e.push({search:a.toString()}))}}))}),v=(a(37),a(5)),b=(a(38),a(39),function(e){var t=e.product,a=e.cart,c=e.setCart,s=e.favorites,l=e.setFavorites,u=t.imageUrl,m=t.name,d=t.price,p=t.discount,f=t.screen,_=t.capacity,E=t.ram,g=d-d*p/100,h=Object(r.useState)(s.filter((function(e){return e.id===t.id})).length>0),b=Object(o.a)(h,2),C=b[0],N=b[1],O=Object(r.useState)(a.filter((function(e){return e.id===t.id})).length>0),P=Object(o.a)(O,2),S=P[0],j=P[1],k=Object(r.useState)(a.filter((function(e){return e.id===t.id})).length),y=Object(o.a)(k,2),w=y[0],F=y[1];Object(r.useEffect)((function(){N(s.filter((function(e){return e.id===t.id})).length>0)}),[s]),Object(r.useEffect)((function(){j(a.filter((function(e){return e.id===t.id})).length>0),F(a.filter((function(e){return e.id===t.id})).length)}),[a]);var I;switch(t.type){case"phone":I="/phones/";break;case"tablet":I="/tablets/";break;default:I="accessorise"}return n.a.createElement("div",{className:"ProductCard"},n.a.createElement("img",{className:"ProductCard__img",src:u,alt:m}),n.a.createElement(i.b,{to:I+t.id,className:"ProductCard__title"},m),p>0?n.a.createElement("div",{className:"ProductCard__price-wrapper"},n.a.createElement("span",{className:"ProductCard__price"},"$"+g),n.a.createElement("span",{className:"ProductCard__price ProductCard__price--old"},"$"+d)):n.a.createElement("div",{className:"ProductCard__price-wrapper"},n.a.createElement("span",{className:"ProductCard__price"},"$"+g)),n.a.createElement("div",{className:"ProductCard__description"},n.a.createElement("span",{className:"ProductCard__feature"},n.a.createElement("span",{className:"ProductCard__feature--title ProductCard__feature"},"Screen"),n.a.createElement("span",{className:"ProductCard__feature--value ProductCard__feature"},f)),n.a.createElement("span",{className:"ProductCard__feature"},n.a.createElement("span",{className:"ProductCard__feature--title ProductCard__feature"},"Capacity"),n.a.createElement("span",{className:"ProductCard__feature--value ProductCard__feature"},_)),n.a.createElement("span",{className:"ProductCard__feature"},n.a.createElement("span",{className:"ProductCard__feature--title ProductCard__feature"},"RAM"),n.a.createElement("span",{className:"ProductCard__feature--value ProductCard__feature"},E))),n.a.createElement("div",{className:"ProductCard__buttons-wrapper"},n.a.createElement("button",{className:S?"ProductCard__add-to-cart ProductCard__add-to-cart--added":"ProductCard__add-to-cart",onClick:function(){c([].concat(Object(v.a)(a),[t]))}},S?"".concat(w,"  added to cart"):"Add to cart"),n.a.createElement("button",{className:C?"ProductCard__add-to-fav ProductCard__add-to-fav--added":"ProductCard__add-to-fav",onClick:function(){l(C?Object(v.a)(s).filter((function(e){return e.id!==t.id})):[].concat(Object(v.a)(s),[t]))}})))}),C=(a(40),function(e){var t=e.products,a=e.cart,r=e.setCart,c=e.favorites,s=e.setFavorites;return n.a.createElement("div",{className:"MainFrame"},t.map((function(e,t){return n.a.createElement(b,{key:e.id+t,product:e,cart:a,setCart:r,favorites:c,setFavorites:s})})))}),N=(a(41),function(e){var t=e.pagesCount,a=Object(l.g)(),c=Object(l.f)(),s=new URLSearchParams(a.search),o=parseInt(s.get("page")||"1"),i=new Array(Math.ceil(t)).fill(0),u=o===i.length,m=1===o,d=function(e){return">"===e.target.name?(s.set("page",(o+1).toString()),void c.push({search:s.toString()})):"<"===e.target.name?(s.set("page",(o-1).toString()),void c.push({search:s.toString()})):(s.set("page",(+e.target.name+1).toString()),void c.push({search:s.toString()}))};return Object(r.useEffect)((function(){s.set("page",o.toString()),c.push({search:s.toString()})}),[o]),n.a.createElement("div",{className:"Pagination"},n.a.createElement("button",{className:"Pagination__button Pagination__button--arrow",type:"button",name:"<",disabled:m,onClick:d},"<"),i.map((function(e,t){return n.a.createElement("button",{key:t,className:t+1===o?"Pagination__button Pagination__button--active":"Pagination__button",name:t.toString(),onClick:d,type:"button"},t+1)})),n.a.createElement("button",{className:"Pagination__button Pagination__button--arrow",type:"button",name:">",disabled:u,onClick:d},">"))}),O=(a(42),function(){var e=Object(l.g)(),t=new URLSearchParams(e.search),a=Object(l.f)();return n.a.createElement("div",{className:"SortBy"},n.a.createElement("span",{className:"SortBy__legend"},"Sort by"),n.a.createElement("br",null),n.a.createElement("select",{className:"SortBy__select",onChange:function(e){t.set("sort_type",e.target.value),a.push({search:t.toString()})},value:t.get("sort_type")||""},[{value:"",text:"Choose"},{value:"age",text:"Newest"},{value:"name",text:"Alphabetically"},{value:"low_price",text:"Low price"},{value:"high_price",text:"High price"}].map((function(e){return n.a.createElement("option",{key:e.value,value:e.value},e.text)}))))}),P=(a(43),function(){var e=Object(l.g)(),t=new URLSearchParams(e.search),a=Object(l.f)();return n.a.createElement("div",{className:"ItemsOnPageSelect"},n.a.createElement("span",{className:"ItemsOnPageSelect__legend"},"Items on page"),n.a.createElement("br",null),n.a.createElement("select",{className:"ItemsOnPageSelect__per-page",onChange:function(e){t.set("per_page",e.target.value),a.push({search:t.toString()})},value:t.get("per_page")||""},["8","16","32","64","All"].map((function(e){return n.a.createElement("option",{key:e,value:e},e)}))))}),S=function(e){var t=e.products,a=e.cart,c=e.setCart,s=e.favorites,i=e.setFavorites,u=Object(r.useState)(t),m=Object(o.a)(u,2),d=m[0],p=m[1],f=Object(r.useState)(d),_=Object(o.a)(f,2),E=_[0],g=_[1],h=Object(r.useState)(E),b=Object(o.a)(h,2),S=b[0],j=b[1],k=Object(l.f)(),y=Object(l.g)(),w=new URLSearchParams(y.search),F=(w.get("filter")||"").toLowerCase(),I=(w.get("sort_type")||"age").toLowerCase(),A=parseInt(w.get("page")||"1"),T=parseInt(w.get("per_page")||"8");return Object(r.useEffect)((function(){w.set("page",A.toString()),w.set("per_page",T.toString()),w.set("sort_type",I),k.push({search:w.toString()})}),[]),Object(r.useEffect)((function(){""!==I?("name"===I&&g(Object(v.a)(d).sort((function(e,t){return e.name.toLowerCase().localeCompare(t.name.toLowerCase())}))),"age"===I&&g(Object(v.a)(d).sort((function(e,t){return e.age-t.age}))),"low_price"===I&&(g(Object(v.a)(d).sort((function(e,t){return e.price*(100-e.discount)/100-t.price*(100-t.discount)/100}))),console.log(E)),"high_price"===I&&g(Object(v.a)(d).sort((function(e,t){return t.price*(100-t.discount)/100-e.price*(100-e.discount)/100})))):g(d)}),[d,I]),Object(r.useEffect)((function(){p(""!==F?t.filter((function(e){return e.name.toLowerCase().includes(F)})):t)}),[t,F]),Object(r.useEffect)((function(){w.set("page","1"),k.push({search:w.toString()})}),[T,I]),Object(r.useEffect)((function(){if(T){var e=(A-1)*T,t=e+T;j(E.slice(e,t))}else j(E)}),[E,A,T]),n.a.createElement(n.a.Fragment,null,n.a.createElement("p",{className:"Catalog__models-count"},"".concat(d.length," models")),n.a.createElement("div",{className:"Catalog__select-wrapper"},n.a.createElement(O,null),n.a.createElement(P,null)),n.a.createElement("div",null,n.a.createElement(C,{products:S,cart:a,setCart:c,favorites:s,setFavorites:i})),n.a.createElement(N,{pagesCount:E.length/T||1}))},j=(a(44),function(e){var t=e.products,a=e.cart,r=e.setCart,c=e.favorites,s=e.setFavorites,o=t.filter((function(e){return"phone"===e.type}));return n.a.createElement("div",{className:"PhonesPage"},n.a.createElement("h1",{className:"PhonesPage__h1"},"Mobile phones"),n.a.createElement(S,{products:o,cart:a,setCart:r,favorites:c,setFavorites:s}))}),k=(a(45),function(e){var t=e.products,a=e.cart,r=e.setCart,c=e.favorites,s=e.setFavorites,o=t.filter((function(e){return"tablet"===e.type}));return n.a.createElement("div",{className:"TabletsPage"},n.a.createElement("h1",{className:"TabletsPage__h1"},"Tablets"),n.a.createElement(S,{products:o,cart:a,setCart:r,favorites:c,setFavorites:s}))}),y=(a(46),function(e){var t=e.products,a=e.cart,r=e.setCart,c=e.favorites,s=e.setFavorites,o=t.filter((function(e){return"accessorie"===e.type||!e.type}));return n.a.createElement("div",{className:"AccessoriesPage"},n.a.createElement("h1",{className:"Accessories__h1"},"Accessories"),n.a.createElement(S,{products:o,cart:a,setCart:r,favorites:c,setFavorites:s}))}),w=function(e){var t=e.productId,a=Object(r.useState)(),c=Object(o.a)(a,2),s=c[0],l=c[1];return Object(r.useEffect)((function(){(function(e){return fetch("https://mate-academy.github.io/react_phone-catalog/api/products/".concat(e)).then((function(e){return e.json()}))})(t).then((function(e){l(e)}))}),[]),n.a.createElement(n.a.Fragment,null,n.a.createElement("h1",null,t),n.a.createElement("p",null,JSON.stringify(s)))},F=(a(47),function(e){var t=e.cart,a=e.setCart,r=e.favorites,c=e.setFavorites;return n.a.createElement("div",{className:"PhonesPage"},n.a.createElement("h1",{className:"PhonesPage__h1"},"Favorites"),n.a.createElement(S,{products:r,cart:t,setCart:a,favorites:r,setFavorites:c}))}),I=(a(48),function(e){var t=e.cart,a=e.setCart,r=e.product,c=e.count,s=r.imageUrl,o=r.name,l=(r.price-r.price*r.discount/100)*c;return n.a.createElement("div",{className:"CartCard"},n.a.createElement("button",{className:"CartCard__delete-button",onClick:function(){a(Object(v.a)(t).filter((function(e){return e.id!==r.id})))}}),n.a.createElement("img",{className:"CartCard__img",src:s,alt:o}),n.a.createElement("p",{className:"CartCard__name"},o),n.a.createElement("button",{disabled:c<=1,onClick:function(){var e=Object(v.a)(t);e.splice(t.findIndex((function(e){return r.id===e.id})),1),a(e)},className:c<=1?"CartCard__count-button CartCard__count-button--disabled":"CartCard__count-button"},"\u0336  "),n.a.createElement("span",{className:"CartCard__count"},c),n.a.createElement("button",{className:"CartCard__count-button",onClick:function(){a([].concat(Object(v.a)(t),[r]))}},"+"),n.a.createElement("span",{className:"CartCard__total"},"$".concat(l)))}),A=(a(49),function(e){var t=e.cart,a=e.setCart,c=t.map((function(e){return JSON.stringify(e)})),s=new Set(c),i=Object(v.a)(s).map((function(e){return JSON.parse(e)})).sort((function(e,t){return e.name.localeCompare(t.name)})),u=Object(r.useState)(0),m=Object(o.a)(u,2),d=m[0],p=m[1],f=Object(r.useState)(t.length),_=Object(o.a)(f,2),E=_[0],g=_[1],h=Object(l.f)();Object(r.useEffect)((function(){for(var e=0,a=0;a<t.length;a++)e+=t[a].price-t[a].price*t[a].discount/100;p(e),g(t.length)}),[t]);return n.a.createElement("div",{className:"CartPage"},n.a.createElement("div",null,i.map((function(e){var r=t.filter((function(t){return e.id===t.id})).length;return n.a.createElement(I,{cart:t,product:e,count:r,setCart:a})}))),n.a.createElement("div",{className:"CartPage__summary"},n.a.createElement("span",{className:"CartPage__total"},"$".concat(d)),n.a.createElement("span",{className:"CartPage__legend"},"Total for ".concat(E," items")),n.a.createElement("span",{className:"CartPage__horis-line"}),n.a.createElement("button",{type:"button",className:"CartPage__checkout",onClick:function(){a([]),h.push("/thanks")}},"Checkout")))}),T=function(){return n.a.createElement("div",{className:"ThanksPage"},n.a.createElement("h1",{className:"ThanksPage__title"},"Thank You!"),n.a.createElement("p",{className:"ThanksPage__paragraph"},"Thanks for your order. Your purchase will be packaged and sent to you shortly."))},L=function(){var e=Object(r.useState)([]),t=Object(o.a)(e,2),a=t[0],c=t[1];Object(r.useEffect)((function(){fetch("https://mate-academy.github.io/react_phone-catalog/api/products.json").then((function(e){return e.json()})).then((function(e){c(e)}))}),[]);var s=a,i=Object(r.useState)(JSON.parse(localStorage.getItem("PhonesCatalog_Cart")||"[]")),f=Object(o.a)(i,2),_=f[0],E=f[1],v=Object(r.useState)(JSON.parse(localStorage.getItem("PhonesCatalog_Favorites")||"[]")),b=Object(o.a)(v,2),C=b[0],N=b[1];Object(r.useEffect)((function(){localStorage.setItem("PhonesCatalog_Cart",JSON.stringify(_))}),[_]),Object(r.useEffect)((function(){localStorage.setItem("PhonesCatalog_Favorites",JSON.stringify(C))}),[C]);return n.a.createElement("div",{className:"App"},n.a.createElement("header",{className:"App__header"},n.a.createElement("div",{className:"App__header-wrapper"},n.a.createElement(m,{links:[{title:"HOME",address:"/#",isOuter:!1},{title:"PHONES",address:"/phones",isOuter:!1},{title:"TABLETS",address:"/tablets",isOuter:!1},{title:"ACCESSORIES",address:"/accessories",isOuter:!1}]}),n.a.createElement("div",{className:"App__header-right-wrapper"},n.a.createElement(h,null),n.a.createElement(d,{favorites:C}),n.a.createElement(p,{cart:_})))),n.a.createElement("main",{className:"App__main"},n.a.createElement(l.c,null,a.map((function(e){var t="/";switch(e.type){case"phone":t="/phones/";break;case"tablet":t="/tablets/";break;default:t="/accessories/"}return n.a.createElement(l.a,{key:e.id,path:"".concat(t+e.id)},n.a.createElement(w,{productId:e.id}))})),n.a.createElement(l.a,{path:"/phones"},n.a.createElement(j,{products:s,cart:_,setCart:E,favorites:C,setFavorites:N})),n.a.createElement(l.a,{path:"/tablets"},n.a.createElement(k,{products:s,cart:_,setCart:E,favorites:C,setFavorites:N})),n.a.createElement(l.a,{path:"/accessories"},n.a.createElement(y,{products:s,cart:_,setCart:E,favorites:C,setFavorites:N})),n.a.createElement(l.a,{path:"/favorites"},n.a.createElement(F,{products:s,cart:_,setCart:E,favorites:C,setFavorites:N})),n.a.createElement(l.a,{path:"/cart"},n.a.createElement(A,{cart:_,setCart:E})),n.a.createElement(l.a,{path:"/thanks"},n.a.createElement(T,null)),n.a.createElement(l.a,{path:"/"},n.a.createElement(g,null)))),n.a.createElement("footer",{className:"App__footer"},n.a.createElement(u,null),n.a.createElement(m,{links:[{title:"GITHUB",address:"http://www.github.com",isOuter:!0},{title:"CONTACTS",address:"/contacts",isOuter:!1},{title:"RIGHTS",address:"/rights",isOuter:!1}]})))};s.a.render(n.a.createElement(i.a,null,n.a.createElement(L,null)),document.getElementById("root"))}]),[[20,1,2]]]);
//# sourceMappingURL=main.4957057f.chunk.js.map